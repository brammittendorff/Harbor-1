FROM	goharbor/harbor-core:v1.9.0
VOLUME  /etc/core/ca/
VOLUME  /etc/core/token/
COPY	./app.conf /etc/core/app.conf
COPY	./private_key.pem /etc/core/private_key.pem
COPY	./secretkey /etc/core/key
COPY	./data /data
ENV	CONFIG_PATH=/etc/core/app.conf UAA_CA_ROOT=/etc/core/certificates/uaa_ca.pem _REDIS_URL=127.0.0.1:6379,100, SYNC_REGISTRY=false CHART_CACHE_DRIVER=redis _REDIS_URL_REG=redis://127.0.0.1:6379/1
ENV	PORT=8080 LOG_LEVEL=info EXT_ENDPOINT=http:// DATABASE_TYPE=postgresql POSTGRESQL_HOST=127.0.0.1 POSTGRESQL_PORT=5432 POSTGRESQL_USEr=admin POSTGRESQL_PASS=root123 POSTGRESQL_DATABASE=registry POSTGRESQL_SSLMODE=disable POSTGRESQL_MAX_IDLE_CONNS=50 POSTGRESQL_MAX_OPEN_CONNS=100 REGISTRY_URL=http://127.0.0.1:5000 TOKEN_SERVICE_URL=http://139.196.72.60:21493/service/token HARBOR_ADMIN_PASSWORD=Harbor12345 MAX_JOB_WORKERS=10 CORE_SECRET=PDiS2gDJxvMtgW5q JOBSERVICE_SECRET=hsXbrV3GbxB573BM ADMIRAL_URL= WITH_NOTARY=False WITH_CLAIR=False CLAIR_DB_PASSWORD= CLAIR_DB_HOST= CLAIR_DB_PORT= CLAIR_DB_USERNAME= CLAIR_DB= CLAIR_DB_SSLMODE= CORE_URL=http://127.0.0.1:8081 CORE_LOCAL_URL=http://127.0.0.1:8080 JOBSERVICE_URL=http://127.0.0.1:8003 CLAIR_URL=http://clair:6060 NOTARY_URL=http://notary-server:4443 REGISTRY_STORAGE_PROVIDER_NAME=filesystem READ_ONLY=false RELOAD_KEY= CHART_REPOSITORY_URL=http://chartmuseum:9999 REGISTRY_CONTROLLER_URL=http://127.0.0.1:8004 WITH_CHARTMUSEUM=False
ENV	HTTP_PROXY= HTTPS_PROXY= NO_PROXY=127.0.0.1,localhost,.local,.internal,log,db,redis,nginx,core,portal,postgresql,jobservice,registry,registryctl,clair

EXPOSE 8081
